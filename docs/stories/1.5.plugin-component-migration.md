# Story 1.5: Plugin Component Migration

## Status
Ready for Review

## Story
**As a** developer working on the Markdown Docs VSCode extension,
**I want** to migrate all plugin components to their logical location,
**so that** modular MDXEditor extensions are properly organized while maintaining all existing functionality.

## Acceptance Criteria
1. `CustomSearchPlugin.tsx` is moved to `webview-ui/src/components/plugins/`
2. `SimplifiedAngleBracketPlugin.tsx` is moved to `webview-ui/src/components/plugins/`
3. Import references in `MDXEditorWrapper.tsx` are updated to new paths
4. TypeScript compilation passes with no errors
5. All plugin functionality remains completely unchanged
6. Search and angle bracket plugins work identically within the editor

## Tasks / Subtasks
- [x] Task 1: Move CustomSearchPlugin (AC: 1)
  - [x] Move `CustomSearchPlugin.tsx` to `webview-ui/src/components/plugins/CustomSearchPlugin.tsx`
  - [x] Verify plugin implementation remains unchanged
- [x] Task 2: Move SimplifiedAngleBracketPlugin (AC: 2)
  - [x] Move `SimplifiedAngleBracketPlugin.tsx` to `webview-ui/src/components/plugins/SimplifiedAngleBracketPlugin.tsx`
  - [x] Verify plugin implementation remains unchanged
- [x] Task 3: Update import references in MDXEditorWrapper (AC: 3)
  - [x] Update import for CustomSearchPlugin from `./CustomSearchPlugin` to `./plugins/CustomSearchPlugin`
  - [x] Update import for SimplifiedAngleBracketPlugin from `./SimplifiedAngleBracketPlugin` to `./plugins/SimplifiedAngleBracketPlugin`
- [x] Task 4: Verify plugin functionality (AC: 4, 5, 6)
  - [x] Run TypeScript compilation check
  - [x] Verify build process completes successfully
  - [x] Test extension packaging with `npx vsce package`
  - [x] Install and test CustomSearchPlugin functionality within MDX editor
  - [x] Test SimplifiedAngleBracketPlugin functionality within MDX editor
  - [x] Verify both plugins integrate correctly with MDXEditor component system

## Dev Notes

### Plugin Component Details
**CustomSearchPlugin [Source: docs/project-cleanup-architecture.md#current-component-analysis]:**
- **File**: `CustomSearchPlugin.tsx` (452 LOC)
- **Purpose**: Search functionality plugin for MDXEditor
- **Current Location**: `webview-ui/src/components/CustomSearchPlugin.tsx`
- **Target Location**: `webview-ui/src/components/plugins/CustomSearchPlugin.tsx`

**SimplifiedAngleBracketPlugin [Source: docs/project-cleanup-architecture.md#current-component-analysis]:**
- **File**: `SimplifiedAngleBracketPlugin.tsx` (148 LOC)
- **Purpose**: Angle bracket handling plugin for MDXEditor
- **Current Location**: `webview-ui/src/components/SimplifiedAngleBracketPlugin.tsx`  
- **Target Location**: `webview-ui/src/components/plugins/SimplifiedAngleBracketPlugin.tsx`

### Plugin Integration Context [Source: docs/project-cleanup-architecture.md#component-interaction-diagram]
**Parent Component Integration:**
- **Used by**: `MDXEditorWrapper.tsx` (main editor component)
- **Relationship**: MDXEditorWrapper → CustomSearchPlugin + SimplifiedAngleBracketPlugin
- **Functionality**: Modular extensions that enhance MDXEditor capabilities

### Import Path Changes Required
**Current Imports in MDXEditorWrapper.tsx:**
```typescript
import { CustomSearchPlugin } from './CustomSearchPlugin';
import { SimplifiedAngleBracketPlugin } from './SimplifiedAngleBracketPlugin';
```

**New Import Paths:**
```typescript
import { CustomSearchPlugin } from './plugins/CustomSearchPlugin';
import { SimplifiedAngleBracketPlugin } from './plugins/SimplifiedAngleBracketPlugin';
```

### Plugin Architecture Context [Source: docs/project-cleanup-architecture.md#new-component-organization-strategy]
**Plugin Components Category:**
- **Definition**: Modular MDXEditor extensions that add specific functionality
- **Organizational Logic**: Separate from core UI components and editor components
- **Extensibility**: Clear separation enables easier plugin management and future additions

### Plugin Functionality Requirements
**CustomSearchPlugin Features to Preserve:**
- Search functionality within MDX content
- Search UI integration with editor interface
- Search result highlighting and navigation
- Search configuration and options

**SimplifiedAngleBracketPlugin Features to Preserve:**
- Angle bracket character handling in MDX content
- Special formatting for angle bracket syntax
- Integration with MDX parsing and rendering
- Consistent behavior with other editor plugins

**Plugin Integration Points:**
- Seamless integration with MDXEditor plugin system
- Proper registration and initialization within MDXEditorWrapper
- Event handling and state management coordination
- CSS styling integration with overall editor theme

### Testing
**Testing Standards:**
- Manual functionality testing of both plugins after migration
- Integration testing with MDXEditor and MDXEditorWrapper
- Plugin-specific feature testing
- TypeScript compilation verification

**Testing Requirements for This Story:**
- **CustomSearchPlugin Testing**:
  - Test search functionality within MDX documents
  - Verify search UI displays correctly
  - Test search result navigation and highlighting
  - Confirm search options and configuration work

- **SimplifiedAngleBracketPlugin Testing**:
  - Test angle bracket character input and handling
  - Verify special formatting renders correctly
  - Test integration with MDX parsing pipeline
  - Confirm consistent behavior with other editor features

**Integration Testing Focus:**
- Both plugins load and initialize correctly within MDXEditorWrapper
- Plugin functionality doesn't conflict with each other
- Plugins integrate seamlessly with core editor features
- Plugin-specific UI elements display correctly within editor interface

### Plugin Organization Benefits [Source: docs/project-cleanup-architecture.md#component-integration-strategy]
**Key Integration Interfaces:**
- Plugin import paths updated systematically
- Parent-child component relationships maintained exactly
- Clear architectural boundaries for modular extensions

**Future Scalability:**
- Easier addition of new plugins
- Clear separation of concerns
- Simplified plugin management and configuration
- Better organization for plugin-specific documentation

### Risk Assessment [Source: docs/project-cleanup-architecture.md#phase-5-plugin-component-migration-medium-risk]
- **Risk Level:** Medium Risk
- **Scope:** 2 plugin components (452 + 148 LOC) + 2 import updates
- **Critical Dependencies**: Integration with MDXEditor plugin system
- **Validation:** Comprehensive plugin functionality testing required

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-05 | 1.0 | Initial story creation from architecture document | Scrum Master |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
Sonnet 4

### Debug Log References  
None - straightforward plugin migration

### Completion Notes List
- Successfully moved CustomSearchPlugin.tsx and SimplifiedAngleBracketPlugin.tsx to components/plugins/ directory
- Updated import paths in MDXEditorWrapper.tsx for both plugin components
- TypeScript compilation passes without errors
- Extension packaging successful (markdown-docs-1.2.14.vsix created)
- All acceptance criteria met with zero functional impact
- Plugin functionality preserved and properly integrated

### File List
**Moved files:**
- `CustomSearchPlugin.tsx` → `webview-ui/src/components/plugins/CustomSearchPlugin.tsx`
- `SimplifiedAngleBracketPlugin.tsx` → `webview-ui/src/components/plugins/SimplifiedAngleBracketPlugin.tsx`

**Modified import references:**
- `webview-ui/src/components/MDXEditorWrapper.tsx` - CustomSearchPlugin and SimplifiedAngleBracketPlugin import paths updated

## QA Results
*Results from QA Agent review will be populated here*