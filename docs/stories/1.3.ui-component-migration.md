# Story 1.3: UI Component Migration

## Status
Draft

## Story
**As a** developer working on the Markdown Docs VSCode extension,
**I want** to migrate all UI components to their logical domain-specific directories,
**so that** pure UI components are properly organized by responsibility while maintaining all existing functionality.

## Acceptance Criteria
1. All comment components are moved to `webview-ui/src/components/ui/comments/`
2. Navigation components are moved to `webview-ui/src/components/ui/navigation/`
3. Status components are moved to `webview-ui/src/components/ui/status/`
4. Common components are moved to `webview-ui/src/components/ui/common/`
5. All import references are updated throughout the codebase
6. All CSS files are moved with their respective components
7. TypeScript compilation passes with no errors
8. All UI functionality remains completely unchanged

## Tasks / Subtasks
- [ ] Task 1: Migrate comment components (AC: 1)
  - [ ] Move `CommentItem.tsx` and `CommentItem.css` to `webview-ui/src/components/ui/comments/`
  - [ ] Move `CommentList.tsx` and `CommentList.css` to `webview-ui/src/components/ui/comments/`
  - [ ] Move `CommentModal.tsx` and `CommentModal.css` to `webview-ui/src/components/ui/comments/`
  - [ ] Update CSS imports within components to maintain styling
- [ ] Task 2: Migrate navigation components (AC: 2)
  - [ ] Move `TableOfContents.tsx` and `TableOfContents.css` to `webview-ui/src/components/ui/navigation/`
  - [ ] Update CSS imports within component
- [ ] Task 3: Migrate status components (AC: 3)  
  - [ ] Move `StatusBar.tsx` and `StatusBar.css` to `webview-ui/src/components/ui/status/`
  - [ ] Update CSS imports within component
- [ ] Task 4: Migrate common components (AC: 4)
  - [ ] Move `ErrorBoundary.tsx` to `webview-ui/src/components/ui/common/`
- [ ] Task 5: Update all import references (AC: 5)
  - [ ] Update imports in `App.tsx` for CommentList
  - [ ] Update imports in `MDXEditorWrapper.tsx` for TableOfContents, StatusBar, CommentModal
  - [ ] Update imports in `CommentList.tsx` for CommentItem  
  - [ ] Update imports in `EditorApp.tsx` for ErrorBoundary
  - [ ] Verify all relative import paths are correct
- [ ] Task 6: Verify functionality and build (AC: 6, 7, 8)
  - [ ] Run TypeScript compilation check
  - [ ] Verify all CSS styling continues to work
  - [ ] Test extension packaging with `npx vsce package`
  - [ ] Install and verify all UI components work identically
  - [ ] Test comment system, navigation, status bar, and error handling

## Dev Notes

### Component Migration Mapping
**Comment Components (44-100 LOC each) [Source: docs/project-cleanup-architecture.md#current-component-analysis]:**
- `CommentItem.tsx` (44 LOC) → `components/ui/comments/CommentItem.tsx`
- `CommentList.tsx` (37 LOC) → `components/ui/comments/CommentList.tsx`  
- `CommentModal.tsx` (100 LOC) → `components/ui/comments/CommentModal.tsx`

**Navigation Components:**
- `TableOfContents.tsx` (78 LOC) → `components/ui/navigation/TableOfContents.tsx`

**Status Components:**
- `StatusBar.tsx` (54 LOC) → `components/ui/status/StatusBar.tsx`

**Common Components:**
- `ErrorBoundary.tsx` (119 LOC) → `components/ui/common/ErrorBoundary.tsx`

### Current Import Dependencies [Source: Project Structure Analysis]
**App.tsx imports:**
- CommentList component

**MDXEditorWrapper.tsx imports:**
- TableOfContents component
- StatusBar component  
- CommentModal component

**CommentList.tsx imports:**
- CommentItem component

**EditorApp.tsx imports:**
- ErrorBoundary component

### New Import Path Structure
**Comment Components:**
```typescript
// Old: from './CommentItem'
// New: from './ui/comments/CommentItem'
```

**Navigation Components:**
```typescript
// Old: from './TableOfContents'  
// New: from './ui/navigation/TableOfContents'
```

**Status Components:**
```typescript
// Old: from './StatusBar'
// New: from './ui/status/StatusBar'
```

**Common Components:**
```typescript
// Old: from './ErrorBoundary'
// New: from './ui/common/ErrorBoundary'
```

### CSS File Relationships [Source: docs/project-cleanup-architecture.md#constraints]
**Critical Requirement:** CSS file locations and imports must be preserved exactly

**CSS Files to Move:**
- `CommentItem.css` → `components/ui/comments/CommentItem.css`
- `CommentList.css` → `components/ui/comments/CommentList.css`
- `CommentModal.css` → `components/ui/comments/CommentModal.css`
- `TableOfContents.css` → `components/ui/navigation/TableOfContents.css`
- `StatusBar.css` → `components/ui/status/StatusBar.css`

**CSS Import Updates Required:**
- Maintain relative imports within each component (e.g., `import './CommentItem.css'`)

### Component Interaction Preservation [Source: docs/project-cleanup-architecture.md#component-interaction-diagram]
**Critical Relationships to Maintain:**
- App → CommentList → CommentItem (comment system flow)
- MDXEditorWrapper → TableOfContents (navigation integration)
- MDXEditorWrapper → StatusBar (status display)
- MDXEditorWrapper → CommentModal (comment creation)
- EditorApp → ErrorBoundary (error handling wrapper)

### Testing
**Testing Standards:**
- Manual functionality testing of all UI components after migration
- CSS styling verification to ensure no visual regressions
- Component interaction testing (parent-child relationships)
- TypeScript compilation verification

**Testing Requirements for This Story:**
- **Comment System**: Test comment creation, display, editing, and modal interactions
- **Navigation**: Verify table of contents generation and navigation functionality
- **Status Display**: Confirm status bar shows correct editor state information  
- **Error Handling**: Test error boundary catches and displays errors correctly
- **Styling**: Verify all CSS styles apply correctly from new locations

**Integration Testing Focus:**
- Comment flow: App → CommentList → CommentItem → CommentModal
- Editor integration: MDXEditorWrapper with TableOfContents and StatusBar
- Error boundary wrapping of main application components

### Risk Assessment [Source: docs/project-cleanup-architecture.md#phase-3-ui-component-migration-medium-risk]
- **Risk Level:** Medium Risk
- **Scope:** 6 components + 5 CSS files + multiple import updates
- **Critical Dependencies:** Parent-child component relationships must be preserved
- **Validation:** Comprehensive UI functionality testing required

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-05 | 1.0 | Initial story creation from architecture document | Scrum Master |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References  
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be populated here*